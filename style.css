:root {
  --bg-1: #0f172a;
  --bg-2: #12263a;
  --panel: #0b1220;
  --text: #e6edf7;
  --accent: #39b6ff;
  --accent-2: #4ade80;
  --accent-3: #fbbf24;
  --danger: #ff8a8a;
}

* {
  box-sizing: border-box;
}

body {
  margin: 0;
  min-height: 100vh;
  display: grid;
  place-items: center;
  background:
    radial-gradient(circle at 8% 12%, #294f78 0%, transparent 30%),
    radial-gradient(circle at 85% 20%, #2f2f66 0%, transparent 28%),
    linear-gradient(165deg, #0a1120 0%, #111f36 45%, #090d18 100%);
  color: var(--text);
  font-family: "Sora", "Segoe UI", sans-serif;
  overflow: hidden;
}

body.god-mode {
  background:
    radial-gradient(circle at 10% 15%, #5a1414 0%, transparent 35%),
    radial-gradient(circle at 80% 25%, #3b0c0c 0%, transparent 40%),
    linear-gradient(165deg, #2a0c0c 0%, #1c0a0a 50%, #120606 100%);
}


.wrap {
  width: min(92vw, 720px);
  text-align: center;
}

h1 {
  margin: 0 0 0.35rem;
  letter-spacing: 0.06em;
  text-shadow: 0 4px 22px rgb(56 180 255 / 45%);
  font-family: "Orbitron", "Sora", sans-serif;
}

.hint {
  margin: 0 0 0.8rem;
  color: #d5e6ff;
  font-size: 0.95rem;
}

.hud {
  display: grid;
  grid-template-columns: repeat(7, 1fr);
  gap: 0.55rem;
  margin-bottom: 0.85rem;
  align-items: center;
  min-height: 52px;
}

.hud > div {
  background: color-mix(in hsl, var(--panel), white 5%);
  border: 1px solid #2a3854;
  border-radius: 10px;
  padding: 0.42rem 0.3rem;
  font-weight: 600;
  font-family: "Orbitron", "Sora", sans-serif;
  box-shadow: inset 0 0 16px rgb(120 200 255 / 8%);
  font-variant-numeric: tabular-nums;
  white-space: nowrap;
  min-height: 42px;
  display: flex;
  align-items: center;
  justify-content: center;
  color: #eaf2ff;
  text-shadow: 0 0 12px rgb(85 170 255 / 28%);
}

.controls {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 0.55rem;
  margin-bottom: 0.85rem;
  min-height: 68px;
  align-items: stretch;
}

.level-meter-wrap,
.audio-controls {
  background:
    linear-gradient(150deg, rgb(33 57 86 / 65%), rgb(13 24 42 / 86%)),
    color-mix(in hsl, var(--panel), white 7%);
  border: 1px solid #3d5579;
  border-radius: 14px;
  padding: 0.58rem 0.65rem;
  box-shadow:
    inset 0 0 24px rgb(150 204 255 / 7%),
    0 8px 24px rgb(0 0 0 / 28%);
  backdrop-filter: blur(3px);
  min-height: 64px;
  display: grid;
  align-content: center;
}

.meter-label {
  display: flex;
  justify-content: space-between;
  font-size: 0.88rem;
  color: #e6f0ff;
  margin-bottom: 0.38rem;
  letter-spacing: 0.02em;
  font-family: "Orbitron", "Sora", sans-serif;
}

.meter-label span:last-child {
  min-width: 80px;
  text-align: right;
  font-variant-numeric: tabular-nums;
}

.meter-track {
  height: 12px;
  border-radius: 999px;
  background: linear-gradient(180deg, #111e33, #1a2a43);
  border: 1px solid #385173;
  overflow: hidden;
  box-shadow: inset 0 0 12px rgb(0 0 0 / 45%);
}

.meter-fill {
  height: 100%;
  width: 0%;
  border-radius: 999px;
  background: linear-gradient(90deg, #39b6ff 0%, #4ade80 55%, #c3ff7a 100%);
  box-shadow: 0 0 16px rgb(76 196 255 / 60%);
  transition: width 0.22s ease;
}

.energy-track {
  border-color: #6b4d2b;
  background: linear-gradient(180deg, #2a1d12, #3b2b19);
}

.energy-fill {
  background: linear-gradient(90deg, #ff8a00 0%, #ffd166 60%, #fff3b0 100%);
  box-shadow: 0 0 16px rgb(255 170 66 / 55%);
}

.power-track {
  border-color: #3b3568;
  background: linear-gradient(180deg, #1a1430, #251c45);
}

.power-fill {
  background: linear-gradient(90deg, #7c3aed 0%, #38bdf8 55%, #a78bfa 100%);
  box-shadow: 0 0 16px rgb(140 100 255 / 55%);
}

.audio-controls {
  display: grid;
  grid-template-columns: auto auto minmax(120px, 1fr) auto;
  align-items: center;
  gap: 0.55rem;
  max-width: 300px;
  justify-self: center;
}

.audio-controls button {
  border: 1px solid #4d7ab0;
  border-radius: 999px;
  background: linear-gradient(180deg, #2d8cff, #2969d8);
  color: #e6edf7;
  padding: 0.36rem 0.9rem;
  font-weight: 600;
  letter-spacing: 0.02em;
  cursor: pointer;
  box-shadow:
    0 4px 14px rgb(45 140 255 / 35%),
    inset 0 1px 0 rgb(255 255 255 / 26%);
  transition: transform 0.14s ease, filter 0.14s ease;
}

.audio-controls button:hover {
  filter: brightness(1.08);
  transform: translateY(-1px);
}

.audio-controls button.is-muted {
  background: linear-gradient(180deg, #ff8a8a, #dc4f4f);
  border-color: #ef8f8f;
  box-shadow:
    0 4px 14px rgb(239 106 106 / 34%),
    inset 0 1px 0 rgb(255 255 255 / 24%);
}

.audio-controls label,
.audio-controls span {
  font-size: 0.88rem;
  color: #e6f0ff;
  white-space: nowrap;
  text-shadow: 0 0 10px rgb(80 160 255 / 25%);
}

.audio-controls input[type="range"] {
  accent-color: #4ab3ff;
  width: 100%;
  height: 6px;
  border-radius: 999px;
  background: linear-gradient(90deg, #20426d, #2f5f94);
  outline: none;
  margin: 0;
}

.audio-controls input[type="range"]::-webkit-slider-thumb {
  appearance: none;
  width: 15px;
  height: 15px;
  border-radius: 50%;
  background: #9addff;
  border: 2px solid #d7f2ff;
  box-shadow: 0 0 10px rgb(112 220 255 / 75%);
  cursor: pointer;
}

.audio-controls input[type="range"]::-moz-range-thumb {
  width: 15px;
  height: 15px;
  border-radius: 50%;
  background: #9addff;
  border: 2px solid #d7f2ff;
  box-shadow: 0 0 10px rgb(112 220 255 / 75%);
  cursor: pointer;
}

canvas {
  width: 100%;
  height: auto;
  display: block;
  border-radius: 14px;
  border: 2px solid #2a3854;
  background: linear-gradient(180deg, var(--bg-2), #0d1628 65%, #090f1c);
  box-shadow: 0 20px 44px rgb(0 0 0 / 46%);
}

.game-shell {
  width: 100%;
}

.legend {
  margin: 0.7rem 0 0.8rem;
  background: linear-gradient(160deg, rgb(16 30 52 / 86%), rgb(10 17 31 / 90%));
  border: 1px solid #3b557c;
  border-radius: 12px;
  padding: 0.55rem 0.7rem;
  width: 100%;
  text-align: left;
  font-size: 0.8rem;
  box-shadow: 0 10px 24px rgb(0 0 0 / 35%);
  color: #e6f0ff;
}

.legend h3 {
  margin: 0 0 0.4rem;
  font-size: 0.86rem;
  font-family: "Orbitron", "Sora", sans-serif;
  letter-spacing: 0.04em;
}

.legend ul {
  list-style: none;
  margin: 0;
  padding: 0;
  display: grid;
  gap: 0.35rem;
}

.legend li {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  color: #cbd9ee;
}

.legend-dot {
  width: 10px;
  height: 10px;
  border-radius: 50%;
  box-shadow: 0 0 10px rgb(255 255 255 / 35%);
}

.legend-dot.shield { background: #60a5fa; }
.legend-dot.speed { background: #fbbf24; }
.legend-dot.freeze { background: #a78bfa; }
.legend-dot.time { background: #34d399; }
.legend-dot.diamond { background: #7ee7ff; }

.menu {
  position: fixed;
  inset: 0;
  display: grid;
  place-items: center;
  background:
    radial-gradient(circle at top, rgb(60 140 255 / 35%), rgb(8 12 20 / 92%)),
    radial-gradient(circle at 20% 80%, rgb(255 120 160 / 20%), rgb(8 12 20 / 92%));
  backdrop-filter: blur(6px);
  z-index: 10;
  animation: menuGlow 6s ease-in-out infinite;
}

.menu.hide {
  display: none;
}

.menu-card {
  width: min(88vw, 420px);
  padding: 1.4rem 1.4rem;
  border-radius: 18px;
  border: 1px solid #6ca2ff;
  background:
    linear-gradient(160deg, rgb(22 44 78 / 96%), rgb(7 12 25 / 95%));
  box-shadow:
    0 20px 50px rgb(0 0 0 / 55%),
    0 0 30px rgb(66 140 255 / 35%);
  text-align: center;
}

.menu-title {
  margin: 0 0 1rem;
  font-family: "Press Start 2P", monospace;
  font-size: 1.3rem;
  letter-spacing: 0.08em;
  color: #d5f3ff;
  text-shadow: 0 0 18px rgb(102 198 255 / 70%);
}

.menu-buttons {
  display: grid;
  gap: 0.6rem;
}

.menu-buttons button {
  font-family: "Press Start 2P", monospace;
  font-size: 0.76rem;
  padding: 0.75rem 0.9rem;
  border-radius: 12px;
  border: 1px solid #7cb0ff;
  background: linear-gradient(180deg, #62b8ff, #2c76ff);
  color: #f2fbff;
  cursor: pointer;
  box-shadow:
    0 10px 20px rgb(46 130 232 / 55%),
    0 0 18px rgb(78 150 255 / 50%);
  transition: transform 0.16s ease, filter 0.16s ease;
}

.menu-buttons button:hover {
  transform: translateY(-1px);
  filter: brightness(1.05);
}

.menu-panel {
  margin-top: 0.9rem;
  padding: 0.7rem;
  border-radius: 12px;
  border: 1px solid #4d76b0;
  background: rgb(8 16 32 / 88%);
  text-align: left;
}

.menu-panel .audio-controls {
  margin-top: 0.5rem;
}

.leaderboard {
  list-style: none;
  margin: 0.5rem 0 0;
  padding: 0;
  display: grid;
  gap: 0.35rem;
  font-family: "Sora", "Orbitron", sans-serif;
  font-size: 0.85rem;
  color: #d8ecff;
}

.leaderboard li {
  padding: 0.35rem 0.5rem;
  border-radius: 8px;
  background: rgb(10 18 33 / 60%);
  border: 1px solid #2e4a74;
  display: grid;
  grid-template-columns: 1fr auto;
  gap: 0.5rem;
}

.settings-group + .settings-group {
  margin-top: 0.8rem;
}

.settings-toggle {
  width: 100%;
  border-radius: 10px;
  border: 1px solid #6aa6ff;
  padding: 0.55rem 0.7rem;
  background: linear-gradient(180deg, #3c6ed1, #254a98);
  color: #ecf6ff;
  font-family: "Press Start 2P", monospace;
  font-size: 0.7rem;
  cursor: pointer;
}

.settings-panel {
  margin-top: 0.6rem;
}

.settings-panel.hide {
  display: none;
}

.menu-panel.hide {
  display: none;
}

.menu-panel h3 {
  margin: 0 0 0.5rem;
  font-family: "Press Start 2P", monospace;
  font-size: 0.7rem;
  color: #d5f3ff;
}

.menu-panel p {
  margin: 0;
  font-size: 0.8rem;
  color: #c9d7ee;
  font-family: "Press Start 2P", monospace;
}

.difficulty {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 0.5rem;
  margin-top: 0.6rem;
}

.difficulty button {
  font-family: "Press Start 2P", monospace;
  font-size: 0.65rem;
  padding: 0.55rem 0.6rem;
  border-radius: 10px;
  border: 1px solid #547db5;
  background: linear-gradient(180deg, #3c6ed1, #254a98);
  color: #ecf6ff;
  cursor: pointer;
  transition: filter 0.15s ease, transform 0.15s ease;
}

.difficulty button:hover {
  filter: brightness(1.07);
  transform: translateY(-1px);
}

.difficulty button.active {
  border-color: #9be2ff;
  box-shadow: 0 0 14px rgb(120 210 255 / 60%);
}

.revive {
  position: fixed;
  inset: 0;
  display: grid;
  place-items: center;
  background: rgb(6 10 20 / 70%);
  backdrop-filter: blur(4px);
  z-index: 12;
}

.revive.hide {
  display: none;
}

.revive-card {
  width: min(80vw, 340px);
  padding: 1rem 1.1rem;
  border-radius: 16px;
  border: 1px solid #6aa6ff;
  background: linear-gradient(160deg, rgb(18 32 58 / 95%), rgb(8 14 26 / 97%));
  text-align: center;
  box-shadow: 0 16px 32px rgb(0 0 0 / 45%);
  color: #e6f0ff;
  font-family: "Poppins", "Sora", sans-serif;
  position: relative;
}

.revive-card h3 {
  margin: 0 0 0.4rem;
  font-size: 1.1rem;
}

.revive-card p {
  margin: 0.2rem 0;
}

.name-input {
  width: 100%;
  margin-top: 0.4rem;
  border-radius: 10px;
  border: 1px solid #6aa6ff;
  padding: 0.55rem 0.7rem;
  background: rgb(9 16 32 / 85%);
  color: #e6f0ff;
  font-family: "Poppins", "Sora", sans-serif;
}
.revive-track {
  margin-top: 0.6rem;
}

.revive-fill {
  background: linear-gradient(90deg, #5cf0ff, #5bd67a);
  box-shadow: 0 0 14px rgb(100 230 255 / 60%);
}

.revive-error {
  margin-top: 0.4rem;
  font-family: "Poppins", "Sora", sans-serif;
  color: #ff5b5b;
  text-shadow:
    0 0 8px rgb(0 0 0 / 70%),
    0 1px 0 rgb(0 0 0 / 85%);
  min-height: 20px;
}

.revive-buttons {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 0.6rem;
  margin-top: 0.7rem;
}

.revive-buttons button {
  border-radius: 10px;
  border: 1px solid #6aa6ff;
  padding: 0.55rem 0.7rem;
  background: linear-gradient(180deg, #4aa6ff, #296edb);
  color: #f2fbff;
  cursor: pointer;
  font-weight: 600;
}

.revive-close {
  position: absolute;
  top: 10px;
  right: 10px;
  width: 30px;
  height: 30px;
  border-radius: 10px;
  border: 1px solid #7cb0ff;
  background: linear-gradient(180deg, #2c76ff, #2451b8);
  color: #f2fbff;
  cursor: pointer;
  box-shadow: 0 6px 12px rgb(46 130 232 / 45%);
}

.revive-buttons button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.revive-buttons button:last-child {
  background: linear-gradient(180deg, #ff8a8a, #dc4f4f);
  border-color: #ef8f8f;
}

.menu-audio {
  grid-template-columns: auto auto minmax(120px, 1fr) auto;
  align-items: center;
  gap: 0.5rem;
  max-width: 300px;
  justify-self: center;
}

.menu-audio.no-button {
  grid-template-columns: auto minmax(140px, 1fr) auto;
}

.menu-audio label {
  justify-self: end;
  min-width: 52px;
}

.menu-audio span {
  min-width: 48px;
  text-align: right;
}

.menu-audio input[type="range"] {
  appearance: none;
  height: 6px;
  border-radius: 999px;
  background: linear-gradient(90deg, #1f3a63, #3b6ac0);
  box-shadow: inset 0 0 8px rgb(0 0 0 / 35%);
}

.menu-audio input[type="range"]::-webkit-slider-thumb {
  appearance: none;
  width: 16px;
  height: 16px;
  border-radius: 50%;
  background: #9ad7ff;
  border: 2px solid #e3f6ff;
  box-shadow: 0 0 12px rgb(120 210 255 / 85%);
}

.menu-audio input[type="range"]::-moz-range-thumb {
  width: 16px;
  height: 16px;
  border-radius: 50%;
  background: #9ad7ff;
  border: 2px solid #e3f6ff;
  box-shadow: 0 0 12px rgb(120 210 255 / 85%);
}

.menu-audio button,
.menu-audio label,
.menu-audio span {
  font-family: "Press Start 2P", monospace;
  font-size: 0.65rem;
}

.overlay {
  margin-top: 0.8rem;
  padding: 0.8rem;
  border-radius: 10px;
  border: 1px solid #33435f;
  background: rgb(8 13 24 / 80%);
  transition: opacity 0.2s ease;
}

.overlay h2 {
  margin: 0;
}

.overlay p {
  margin: 0.4rem 0 0;
  color: #b8c6dd;
}

.overlay.hide {
  opacity: 0;
  pointer-events: none;
}

.overlay.centered {
  position: fixed;
  inset: 0;
  display: grid;
  place-items: center;
  margin: 0;
  padding: 0;
  background: rgb(6 10 20 / 55%);
  backdrop-filter: blur(4px);
  z-index: 9;
}

.overlay-card {
  max-width: min(86vw, 420px);
  background: linear-gradient(160deg, rgb(18 32 58 / 92%), rgb(8 14 26 / 95%));
  border: 1px solid #4b6a95;
  border-radius: 16px;
  padding: 1rem 1.1rem;
  text-align: center;
  box-shadow: 0 16px 30px rgb(0 0 0 / 45%);
}

.overlay-buttons {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 0.5rem;
  margin-top: 0.7rem;
}

.overlay-buttons button {
  border-radius: 10px;
  border: 1px solid #6aa6ff;
  padding: 0.55rem 0.6rem;
  background: linear-gradient(180deg, #4aa6ff, #296edb);
  color: #f2fbff;
  cursor: pointer;
  font-weight: 600;
}

@media (max-width: 980px) {
  .hud {
    grid-template-columns: repeat(4, 1fr);
  }
  .controls {
    grid-template-columns: repeat(2, 1fr);
  }
}

@media (max-width: 820px) {
  .hud {
    grid-template-columns: repeat(3, 1fr);
  }

  .controls {
    grid-template-columns: 1fr;
  }

  .legend {
    width: 100%;
    margin-top: 0.7rem;
  }
}

@media (max-width: 620px) {
  .hud {
    grid-template-columns: repeat(2, 1fr);
  }

  .audio-controls {
    grid-template-columns: 1fr;
    justify-items: start;
  }

  .audio-controls input[type="range"] {
    width: 100%;
  }
}

@keyframes menuGlow {
  0% { filter: brightness(1); }
  50% { filter: brightness(1.08); }
  100% { filter: brightness(1); }
}
